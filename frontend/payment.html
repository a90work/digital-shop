<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>درگاه پرداخت تستی</title>
<style>
body{font-family:sans-serif;background:#f5f5f5;margin:0;padding:0;display:flex;justify-content:center;align-items:center;height:100vh;}
.container{background:white;padding:20px;border-radius:10px;box-shadow:0 5px 15px rgba(0,0,0,0.2);width:300px;}
input{width:100%;padding:8px;margin:8px 0;border-radius:5px;border:1px solid #ccc;}
button{width:100%;padding:10px;background:#2563eb;color:white;border:none;border-radius:6px;cursor:pointer;}
button:hover{background:#1e40af;}
.success{color:green;font-weight:bold;margin-top:10px;display:none;}
</style>
</head>
<body>

<div class="container">
  <h3>درگاه پرداخت تستی</h3>
  <input type="text" id="name" placeholder="نام صاحب کارت">
  <input type="text" id="card" placeholder="شماره کارت">
  <input type="number" id="amount" placeholder="مبلغ (هزار تومان)">
  <button id="payBtn">پرداخت</button>
  <p class="success" id="successMsg">پرداخت موفق! در حال بازگشت به فروشگاه...</p>
</div>

<script>
document.getElementById('payBtn').addEventListener('click', () => {
  const name = document.getElementById('name').value.trim();
  const card = document.getElementById('card').value.trim();
  const amount = document.getElementById('amount').value.trim();

  if(!name || !card || !amount){
    alert("لطفاً همه فیلدها را پر کنید!");
    return;
  }

  // شبیه‌سازی پردازش پرداخت
  document.getElementById('successMsg').style.display = 'block';

  // بعد از 2 ثانیه بازگشت به فروشگاه و نمایش لینک دانلود
  setTimeout(() => {
    // ارسال پیام به parent (فروشگاه)
    window.opener.postMessage({ paid: true }, "*");
    window.close();
  }, 2000);
});
</script>

</body>
</html>
